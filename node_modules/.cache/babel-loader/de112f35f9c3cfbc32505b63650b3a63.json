{"ast":null,"code":"import Footer from '../components/Footer.vue';\nimport axios from 'axios';\nexport default {\n  name: 'PaymentItem',\n\n  data() {\n    return {\n      orderId: this.$route.query.orderId,\n      orders: {\n        business: {}\n      },\n      isShowDetailet: false,\n      user: {}\n    };\n  },\n\n  created() {\n    this.user = this.$getSessionStorage('user');\n    axios.post('OrdersController/getOrdersById', this.$qs.stringify({\n      orderId: this.orderId\n    })).then(response => {\n      this.orders = response.data;\n      console.log(this.orders);\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n\n  mounted() {\n    //这里的代码是实现：一旦路由到在线支付组件，就不能回到订单确认组件。\n    //先将当前url添加到history对象中\n    history.pushState(null, null, document.URL); //popstate事件能够监听history对象的变化\n\n    window.onpopstate = () => {\n      this.$router.push({\n        path: '/index'\n      });\n    };\n  },\n\n  unmounted() {\n    window.onpopstate = null;\n  },\n\n  methods: {\n    detailetShow() {\n      this.isShowDetailet = !this.isShowDetailet;\n    },\n\n    change() {\n      axios.post('WalletController/pay', this.$qs.stringify({\n        userId: this.user.userId\n      })).then(response => {\n        let result = response.data;\n        this.userSex = result.userSex;\n\n        if (result.userSex == 0) {\n          this.sex = \"0\";\n        }\n\n        this.userName = result.userName;\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n\n  },\n  components: {\n    Footer\n  }\n};","map":{"version":3,"mappings":"AA4CA;AACA;AACA;EACAA,mBADA;;EAEAC;IACA;MACAC,kCADA;MAEAC;QACAC;MADA,CAFA;MAKAC,qBALA;MAMAC;IANA;EAQA,CAXA;;EAYAC;IACA;IAEAC;MACAN;IADA,IAEAO,IAFA,CAEAC;MACA;MACAC;IACA,CALA,EAKAC,KALA,CAKAC;MACAF;IACA,CAPA;EAQA,CAvBA;;EAwBAG;IACA;IACA;IACAC,4CAHA,CAIA;;IACAC;MACA;QAAAC;MAAA;IACA,CAFA;EAGA,CAhCA;;EAiCAC;IACAF;EACA,CAnCA;;EAoCAG;IACAC;MACA;IACA,CAHA;;IAIAC;MACAb;QACAc;MADA,IAEAb,IAFA,CAEAC;QACA;QACA;;QACA;UACA;QACA;;QACA;MACA,CATA,EASAE,KATA,CASAC;QACAF;MACA,CAXA;IAYA;;EAjBA,CApCA;EAuDAY;IACAC;EADA;AAvDA","names":["name","data","orderId","orders","business","isShowDetailet","user","created","axios","then","response","console","catch","error","mounted","history","window","path","unmounted","methods","detailetShow","change","userId","components","Footer"],"sourceRoot":"src/views","sources":["Payment.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <!-- header部分 -->\n    <header>\n      <p>在线支付</p>\n    </header>\n    <!-- 订单信息部分 -->\n    <h3>订单信息：</h3>\n    <div class=\"order-info\">\n      <p>\n        {{orders.business.businessName}}\n        <i class=\"fa fa-caret-down\" @click=\"detailetShow\"></i>\n      </p>\n      <p>&#165;{{orders.orderTotal}}</p>\n    </div>\n    <!-- 订单明细部分 -->\n    <ul class=\"order-detailet\" v-show=\"isShowDetailet\">\n      <li v-for=\"(item,index) in orders.list\" :key=\"index\">\n        <p>{{item.food.foodName}} x {{item.quantity}}</p>\n        <p>&#165;{{item.food.foodPrice*item.quantity}}</p>\n      </li>\n      <li>\n        <p>配送费</p>\n        <p>&#165;{{orders.business.deliveryPrice}}</p>\n      </li>\n    </ul>\n    <!-- 支付方式部分 -->\n    <ul class=\"payment-type\">\n      <li>\n        <img style=\"width:20vw;height:20vw\" src=\"../assets/alipay.png\">\n        <i class=\"fa fa-check-circle\"></i>\n      </li>\n      <li>\n        <img style=\"width:20vw;height:20vw\" src=\"../assets/wechat.png\">\n      </li>\n    </ul>\n    <div class=\"payment-button\">\n      <button @click=\"change\">确认支付</button>\n    </div>\n    <!-- 底部菜单部分 -->\n    <Footer></Footer>\n  </div>\n</template>\n<script>\nimport Footer from '../components/Footer.vue';\nimport axios from 'axios'\nexport default {\n  name: 'PaymentItem',\n  data(){\n    return {\n      orderId:this.$route.query.orderId,\n      orders:{\n        business:{}\n      },\n      isShowDetailet:false,\n      user:{},\n    }\n  },\n  created() {\n    this.user = this.$getSessionStorage('user');\n    \n    axios.post('OrdersController/getOrdersById',this.$qs.stringify({\n      orderId:this.orderId\n    })).then(response=>{\n      this.orders = response.data;\n      console.log(this.orders)\n    }).catch(error=>{\n      console.error(error);\n    });\n  },\n  mounted() {\n    //这里的代码是实现：一旦路由到在线支付组件，就不能回到订单确认组件。\n    //先将当前url添加到history对象中\n    history.pushState(null,null,document.URL);\n    //popstate事件能够监听history对象的变化\n    window.onpopstate = () => {\n      this.$router.push({path:'/index'});\n    }\n  },\n  unmounted() {\n    window.onpopstate = null;\n  },\n  methods:{\n    detailetShow(){\n      this.isShowDetailet = !this.isShowDetailet;\n    },\n    change(){\n      axios.post('WalletController/pay',this.$qs.stringify({\n      userId:this.user.userId,\n    })).then(response=>{\n      let result = response.data;\n      this.userSex = result.userSex;\n      if(result.userSex==0){\n        this.sex = \"0\"\n      }\n      this.userName = result.userName;\n    }).catch(error=>{\n      console.error(error);\n    });\n    }\n  },\n  components: {\n    Footer\n  }\n}\n</script>\n<style scoped>\n/****************** 总容器 ******************/\n.wrapper {\n  width: 100%;\n  height: 100%;\n}\n/****************** header部分 ******************/\n.wrapper header {\n  width: 100%;\n  height: 12vw;\n    background: linear-gradient(to right, #0097FF, rgb(177, 201, 247));\n  color: #fff;\n  font-size: 4.8vw;\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n/****************** 订单信息部分 ******************/\n.wrapper h3 {\n  margin-top: 12vw;\n  box-sizing: border-box;\n  padding: 4vw 4vw 0;\n  font-size: 4vw;\n  font-weight: 300;\n  color: #999;\n}\n.wrapper .order-info {\n  box-sizing: border-box;\n  padding: 4vw;\n  font-size: 4vw;\n  color: #666;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.wrapper .order-info p:last-child {\n  color: orangered;\n}\n/****************** 订单明细部分 ******************/\n.wrapper .order-detailet {\n  width: 100%;\n}\n.wrapper .order-detailet li {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 1vw 4vw;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.wrapper .order-detailet li p {\n  font-size: 3vw;\n  color: #666;\n}\n/****************** 支付方式部分 ******************/\n.wrapper .payment-type {\n  width: 100%;\n}\n.wrapper .payment-type li {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 4vw;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.wrapper .payment-type li img {\n  width: 33vw;\n  height: 8.9vw;\n}\n.wrapper .payment-type li .fa-check-circle {\n  font-size: 5vw;\n  color: #38CA73;\n}\n.wrapper .payment-button {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 4vw;\n}\n.wrapper .payment-button button {\n  width: 100%;\n  height: 10vw;\n  border: none;\n  /*去掉外轮廓线*/\n  outline: none;\n  border-radius: 4px;\n  background-color: #38CA73;\n  color: #fff;\n}\n</style>"]},"metadata":{},"sourceType":"module"}