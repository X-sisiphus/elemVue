{"ast":null,"code":"import Footer from '../components/Footer.vue';\nimport axios from 'axios';\nexport default {\n  name: 'UserAddress',\n\n  data() {\n    return {\n      businessId: this.$route.query.businessId,\n      user: {},\n      deliveryAddressArr: []\n    };\n  },\n\n  created() {\n    this.user = this.$getSessionStorage('user');\n    this.listDeliveryAddressByUserId();\n  },\n\n  components: {\n    Footer\n  },\n  filters: {\n    sexFilter(value) {\n      return value == 1 ? '先生' : '女士';\n    }\n\n  },\n  methods: {\n    listDeliveryAddressByUserId() {\n      //查询送货地址\n      axios.post('DeliveryAddressController/listDeliveryAddressByUserId', this.$qs.stringify({\n        userId: this.user.userId\n      })).then(response => {\n        this.deliveryAddressArr = response.data;\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n\n    setDeliveryAddress(deliveryAddress) {\n      //把用户选择的默认送货地址存储到localStorage中\n      this.$setLocalStorage(this.user.userId, deliveryAddress);\n      this.$router.push({\n        path: '/orders',\n        query: {\n          businessId: this.businessId\n        }\n      });\n    },\n\n    toAddUserAddress() {\n      this.$router.push({\n        path: '/addUserAddress',\n        query: {\n          businessId: this.businessId\n        }\n      });\n    },\n\n    editUserAddress(daId) {\n      this.$router.push({\n        path: '/editUserAddress',\n        query: {\n          businessId: this.businessId,\n          daId: daId\n        }\n      });\n    },\n\n    removeUserAddress(daId) {\n      if (!confirm('确认要删除此送货地址吗？')) {\n        return;\n      }\n\n      axios.post('DeliveryAddressController/removeDeliveryAddress', this.$qs.stringify({\n        daId: daId\n      })).then(response => {\n        if (response.data > 0) {\n          let deliveryAddress = this.$getLocalStorage(this.user.userId);\n\n          if (deliveryAddress != null && deliveryAddress.daId == daId) {\n            this.$removeLocalStorage(this.user.userId);\n          }\n\n          this.listDeliveryAddressByUserId();\n        } else {\n          alert('删除地址失败！');\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA8BA;AACA;AACA;EACAA,mBADA;;EAEAC;IACA;MACAC,wCADA;MAEAC,QAFA;MAGAC;IAHA;EAKA,CARA;;EASAC;IACA;IAEA;EACA,CAbA;;EAcAC;IACAC;EADA,CAdA;EAiBAC;IACAC;MACA;IACA;;EAHA,CAjBA;EAsBAC;IACAC;MACA;MAEAC;QACAC;MADA,IAEAC,IAFA,CAEAC;QACA;MACA,CAJA,EAIAC,KAJA,CAIAC;QACAC;MACA,CANA;IAOA,CAXA;;IAYAC;MACA;MACA;MACA;QAAAC;QAAAC;UAAAnB;QAAA;MAAA;IACA,CAhBA;;IAiBAoB;MACA;QAAAF;QAAAC;UAAAnB;QAAA;MAAA;IACA,CAnBA;;IAoBAqB;MACA;QAAAH;QAAAC;UAAAnB;UAAAsB;QAAA;MAAA;IACA,CAtBA;;IAuBAC;MACA;QACA;MACA;;MAGAb;QACAY;MADA,IAEAV,IAFA,CAEAC;QACA;UACA;;UACA;YACA;UACA;;UACA;QACA,CANA,MAMA;UACAW;QACA;MACA,CAZA,EAYAV,KAZA,CAYAC;QACAC;MACA,CAdA;IAeA;;EA5CA;AAtBA","names":["name","data","businessId","user","deliveryAddressArr","created","components","Footer","filters","sexFilter","methods","listDeliveryAddressByUserId","axios","userId","then","response","catch","error","console","setDeliveryAddress","path","query","toAddUserAddress","editUserAddress","daId","removeUserAddress","alert"],"sourceRoot":"src/views","sources":["UserAddress.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <!-- header部分 -->\n    <header>\n      <p>地址管理</p>\n    </header>\n    <!-- 地址列表部分 -->\n    <ul class=\"addresslist\">\n      <li v-for=\"item in deliveryAddressArr\" :key=\"item\">\n        <div class=\"addresslist-left\" @click=\"setDeliveryAddress(item)\">\n          <h3>{{item.contactName}}{{item.contactSex | sexFilter}} {{item.contactTel}}\n          </h3>\n          <p>{{item.address}}</p>\n        </div>\n        <div class=\"addresslist-right\">\n          <i class=\"fa fa-edit\" @click=\"editUserAddress(item.daId)\"></i>\n          <i class=\"fa fa-remove\" @click=\"removeUserAddress(item.daId)\"></i>\n        </div>\n      </li>\n    </ul>\n    <!-- 新增地址部分 -->\n    <div class=\"addbtn\" @click=\"toAddUserAddress\">\n      <i class=\"fa fa-plus-circle\"></i>\n      <p>新增收货地址</p>\n    </div>\n    <!-- 底部菜单部分 -->\n    <Footer></Footer>\n  </div>\n</template>\n<script>\nimport Footer from '../components/Footer.vue';\nimport axios from 'axios'\nexport default{\n  name:'UserAddress',\n  data(){\n    return {\n      businessId:this.$route.query.businessId,\n      user:{},\n      deliveryAddressArr:[]\n    }\n  },\n  created() {\n    this.user = this.$getSessionStorage('user');\n\n    this.listDeliveryAddressByUserId();\n  },\n  components:{\n    Footer\n  },\n  filters:{\n    sexFilter(value){\n      return value==1?'先生':'女士';\n    }\n  },\n  methods:{\n    listDeliveryAddressByUserId(){\n      //查询送货地址\n\n   axios.post('DeliveryAddressController/listDeliveryAddressByUserId',this.$qs.stringify({\n        userId:this.user.userId\n      })).then(response=>{\n        this.deliveryAddressArr = response.data;\n      }).catch(error=>{\n        console.error(error);\n      });\n    },\n    setDeliveryAddress(deliveryAddress){\n      //把用户选择的默认送货地址存储到localStorage中\n      this.$setLocalStorage(this.user.userId,deliveryAddress);\n      this.$router.push({path:'/orders',query:{businessId:this.businessId}});\n    },\n    toAddUserAddress(){\n      this.$router.push({path:'/addUserAddress',query:{businessId:this.businessId}});\n    },\n    editUserAddress(daId){\n      this.$router.push({path:'/editUserAddress',query: {businessId:this.businessId,daId:daId}});\n    },\n    removeUserAddress(daId){\n      if(!confirm('确认要删除此送货地址吗？')){\n        return;\n      }\n\n\n     axios.post('DeliveryAddressController/removeDeliveryAddress',this.$qs.stringify({\n        daId:daId\n      })).then(response=>{\n        if(response.data>0){\n          let deliveryAddress = this.$getLocalStorage(this.user.userId);\n          if(deliveryAddress!=null&&deliveryAddress.daId==daId){\n            this.$removeLocalStorage(this.user.userId);\n          }\n          this.listDeliveryAddressByUserId();\n        }else{\n          alert('删除地址失败！');\n        }\n      }).catch(error=>{\n        console.error(error);\n      });\n    }\n  }\n}\n</script>\n<style scoped>\n/*************** 总容器 ***************/\n.wrapper {\n  width: 100%;\n  height: 100%;\n  background-color: #F5F5F5;\n}\n/*************** header ***************/\n.wrapper header {\n  width: 100%;\n  height: 12vw;\n  background-color: #0097FF;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  color: #fff;\n  font-size: 4.8vw;\n  position: fixed;\n  left: 0;\n  top: 0;\n  /*保证在最上层*/\n  z-index: 1000;\n}\n/*************** addresslist ***************/\n.wrapper .addresslist {\n  width: 100%;\n  margin-top: 12vw;\n  background-color: #fff;\n}\n.wrapper .addresslist li {\n  width: 100%;\n  box-sizing: border-box;\n  border-bottom: solid 1px #DDD;\n  padding: 3vw;\n  display: flex;\n}\n.wrapper .addresslist li .addresslist-left {\n  flex: 5;\n  /*左边这块区域是可以点击的*/\n  user-select: none;\n  cursor: pointer;\n}\n.wrapper .addresslist li .addresslist-left h3 {\n  font-size: 4.6vw;\n  font-weight: 300;\n  color: #666;\n}\n.wrapper .addresslist li .addresslist-left p {\n  font-size: 4vw;\n  color: #666;\n}\n.wrapper .addresslist li .addresslist-right {\n  flex: 1;\n  font-size: 5.6vw;\n  color: #999;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n/*************** 新增地址部分 ***************/\n.wrapper .addbtn {\n  width: 100%;\n  height: 14vw;\n  border-top: solid 1px #DDD;\n  border-bottom: solid 1px #DDD;\n  background-color: #fff;\n  margin-top: 4vw;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 4.5vw;\n  color: #0097FF;\n  user-select: none;\n  cursor: pointer;\n}\n.wrapper .addbtn p {\n  margin-left: 2vw;\n}\n</style>"]},"metadata":{},"sourceType":"module"}