{"ast":null,"code":"import Footer from '../components/Footer.vue';\nexport default {\n  name: 'BusinessList',\n\n  data() {\n    return {\n      orderTypeId: this.$route.query.orderTypeId,\n      businessArr: [],\n      user: {}\n    };\n  },\n\n  created() {\n    this.user = this.$('user'); //根据orderTypeId查询商家信息\n\n    this.$axios.post('BusinessController/listBusinessByOrderTypeId', this.$qs.stringify({\n      orderTypeId: this.orderTypeId\n    })).then(response => {\n      this.businessArr = response.data; //判断是否登录\n\n      if (this.user != null) {\n        this.listCart();\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n\n  components: {\n    Footer\n  },\n  methods: {\n    listCart() {\n      this.$axios.post('CartController/listCart', this.$qs.stringify({\n        userId: this.user.userId\n      })).then(response => {\n        let cartArr = response.data; //遍历所有食品列表\n\n        for (let businessItem of this.businessArr) {\n          businessItem.quantity = 0;\n\n          for (let cartItem of cartArr) {\n            if (cartItem.businessId == businessItem.businessId) {\n              businessItem.quantity += cartItem.quantity;\n            }\n          }\n        }\n\n        this.businessArr.sort();\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n\n    toBusinessInfo(businessId) {\n      this.$router.push({\n        path: '/businessInfo',\n        query: {\n          businessId: businessId\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA0BA;AAEA;EACAA,oBADA;;EAEAC;IACA;MACAC,0CADA;MAEAC,eAFA;MAGAC;IAHA;EAKA,CARA;;EASAC;IACA,2BADA,CAGA;;IACA;MACAH;IADA,IAEAI,IAFA,CAEAC;MACA,iCADA,CAEA;;MACA;QACA;MACA;IACA,CARA,EAQAC,KARA,CAQAC;MACAC;IACA,CAVA;EAWA,CAxBA;;EAyBAC;IACAC;EADA,CAzBA;EA4BAC;IACAC;MACA;QACAC;MADA,IAEAT,IAFA,CAEAC;QACA,4BADA,CAEA;;QACA;UACAS;;UACA;YACA;cACAA;YACA;UACA;QACA;;QACA;MACA,CAdA,EAcAR,KAdA,CAcAC;QACAC;MACA,CAhBA;IAiBA,CAnBA;;IAoBAO;MACA;QAAAC;QAAAC;UAAAC;QAAA;MAAA;IACA;;EAtBA;AA5BA","names":["name","data","orderTypeId","businessArr","user","created","then","response","catch","error","console","components","Footer","methods","listCart","userId","businessItem","toBusinessInfo","path","query","businessId"],"sourceRoot":"src/views","sources":["BusinessList.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <!-- header部分 -->\n    <header>\n      <p>商家列表</p>\n    </header>\n    <!-- 商家列表部分 -->\n    <ul class=\"business\">\n      <li v-for=\"item in businessArr\" @click=\"toBusinessInfo(item.businessId)\" :key=\"item\">\n        <div class=\"business-img\">\n          <img :src=\"item.businessImg\">\n          <div class=\"business-img-quantity\" v-show=\"item.quantity>0\">\n            {{item.quantity}}</div>\n        </div>\n        <div class=\"business-info\">\n          <h3>{{item.businessName}}</h3>\n          <p>&#165;{{item.starPrice}}起送 | &#165;{{item.deliveryPrice}}配送</p>\n          <p>{{item.businessExplain}}</p>\n        </div>\n      </li>\n    </ul>\n    <!-- 底部菜单部分 -->\n    <Footer></Footer>\n  </div>\n</template>\n<script>\nimport Footer from '../components/Footer.vue';\n\nexport default{\n  name:'BusinessList',\n  data(){\n    return {\n      orderTypeId: this.$route.query.orderTypeId,\n      businessArr:[],\n      user:{}\n    }\n  },\n  created() {\n    this.user = this.$('user');\n\n    //根据orderTypeId查询商家信息\n    this.$axios.post('BusinessController/listBusinessByOrderTypeId',this.$qs.stringify({\n      orderTypeId:this.orderTypeId\n    })).then(response=>{\n      this.businessArr = response.data;\n      //判断是否登录\n      if(this.user!=null){\n        this.listCart();\n      }\n    }).catch(error=>{\n      console.error(error);\n    });\n  },\n  components:{\n    Footer\n  },\n  methods:{\n    listCart(){\n      this.$axios.post('CartController/listCart',this.$qs.stringify({\n        userId:this.user.userId\n      })).then(response=>{\n        let cartArr = response.data;\n        //遍历所有食品列表\n        for(let businessItem of this.businessArr){\n          businessItem.quantity = 0;\n          for(let cartItem of cartArr){\n            if(cartItem.businessId==businessItem.businessId){\n              businessItem.quantity += cartItem.quantity;\n            }\n          }\n        }\n        this.businessArr.sort();\n      }).catch(error=>{\n        console.error(error);\n      });\n    },\n    toBusinessInfo(businessId){\n      this.$router.push({path:'/businessInfo',query:{businessId:businessId}});\n    }\n  }\n}\n</script>\n<style scoped>\n/****************** 总容器 ******************/\n.wrapper {\n  width: 100%;\n  height: 100%;\n}\n/****************** header部分 ******************/\n.wrapper header {\n  width: 100%;\n  height: 12vw;\n  background-color: #0097FF;\n  color: #fff;\n  font-size: 4.8vw;\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n/****************** 商家列表部分 ******************/\n.wrapper .business {\n  width: 100%;\n  margin-top: 12vw;\n  margin-bottom: 14vw;\n}\n.wrapper .business li {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 2.5vw;\n  border-bottom: solid 1px #DDD;\n  user-select: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n}\n.wrapper .business li .business-img {\n  /*这里设置为相当定位，成为business-img-quantity元素的父元素*/\n  position: relative;\n}\n.wrapper .business li .business-img img {\n  width: 20vw;\n  height: 20vw;\n}\n.wrapper .business li .business-img .business-img-quantity {\n  width: 5vw;\n  height: 5vw;\n  background-color: red;\n  color: #fff;\n  font-size: 3.6vw;\n  border-radius: 2.5vw;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /*设置成绝对定位，不占文档流空间*/\n  position: absolute;\n  right: -1.5vw;\n  top: -1.5vw;\n}\n.wrapper .business li .business-info {\n  margin-left: 3vw;\n}\n.wrapper .business li .business-info h3 {\n  font-size: 3.8vw;\n  color: #555;\n}\n.wrapper .business li .business-info p {\n  font-size: 3vw;\n  color: #888;\n  margin-top: 2vw;\n}\n</style>"]},"metadata":{},"sourceType":"module"}