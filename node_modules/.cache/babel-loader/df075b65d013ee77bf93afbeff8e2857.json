{"ast":null,"code":"import Footer from '../components/Footer.vue';\nimport axios from 'axios';\nexport default {\n  name: 'UserCenter',\n\n  data() {\n    return {\n      modal: false,\n      modal1: false,\n      modal2: false,\n      modal3: false,\n      fo: true,\n      user: {},\n      sex: \"1\",\n      newName: \"\",\n      userId: \"\",\n      userName: \"\",\n      userSex: 0,\n      newPassword: \"\",\n      totalCredit: 50,\n      addCredit: [{\n        \"creditDetailId\": 69,\n        \"userId\": \"16\",\n        \"credit\": 10,\n        \"channelId\": \"_ORDER_\",\n        \"createTime\": \"1971-01-12 07:36:07\",\n        \"expiredTime\": \"2016-07-30 07:38:42\"\n      }],\n      minusCredit: [{\n        \"creditDetailId\": 69,\n        \"userId\": \"16\",\n        \"credit\": 10,\n        \"channelId\": \"_SPEND_\",\n        \"createTime\": \"1971-01-12 07:36:07\",\n        \"expiredTime\": \"2016-07-30 07:38:42\"\n      }],\n      balance: \"50¥\"\n    };\n  },\n\n  created() {\n    this.user = this.$getSessionStorage('user');\n    axios.post('UserController/getUserInfoById', this.$qs.stringify({\n      userId: this.user.userId\n    })).then(response => {\n      let result = response.data;\n      this.userSex = result.userSex;\n\n      if (result.userSex == 0) {\n        this.sex = \"0\";\n      }\n\n      this.userName = result.userName;\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n\n  methods: {\n    tofc(key) {\n      if (key == 1) {\n        this.fo = true;\n      } else {\n        this.fo = false;\n      }\n    },\n\n    fresh() {\n      this.user = this.$getSessionStorage('user');\n      axios.post('UserController/getUserInfoById', this.$qs.stringify({\n        userId: this.user.userId\n      })).then(response => {\n        let result = response.data;\n        this.userSex = result.userSex;\n        this.userName = result.userName;\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n\n    ok() {\n      axios.post('UserController/updateUserById', this.$qs.stringify({\n        userId: this.user.userId,\n        userName: this.newName,\n        userSex: this.sex / 1\n      })).then(this.fresh);\n      this.$Message.info('修改成功');\n    },\n\n    cancel() {},\n\n    ok1() {\n      axios.post('UserController/updateUserById', this.$qs.stringify({\n        userId: this.user.userId,\n        password: this.newPassword\n      })).then(this.fresh);\n      this.$Message.info('修改成功');\n    }\n\n  },\n  components: {\n    Footer\n  }\n};","map":{"version":3,"mappings":"AAiGA;AACA;AACA;EACAA,kBADA;;EAEAC;IACA;MACAC,YADA;MAEAC,aAFA;MAGAC,aAHA;MAIAC,aAJA;MAKAC,QALA;MAMAC,QANA;MAOAC,QAPA;MAQAC,WARA;MASAC,UATA;MAUAC,YAVA;MAWAC,UAXA;MAYAC,eAZA;MAaAC,eAbA;MAcAC;QACA,oBADA;QAEA,cAFA;QAGA,YAHA;QAIA,sBAJA;QAKA,mCALA;QAMA;MANA,EAdA;MAsBAC;QACA,oBADA;QAEA,cAFA;QAGA,YAHA;QAIA,sBAJA;QAKA,mCALA;QAMA;MANA,EAtBA;MA8BAC;IA9BA;EAgCA,CAnCA;;EAoCAC;IAEA;IACAC;MACAT;IADA,IAEAU,IAFA,CAEAC;MACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CATA,EASAC,KATA,CASAC;MACAC;IACA,CAXA;EAYA,CAnDA;;EAoDAC;IACAC;MACA;QACA;MACA,CAFA,MAGA;QACA;MACA;IACA,CARA;;IASAC;MACA;MACAR;QACAT;MADA,IAEAU,IAFA,CAEAC;QACA;QAEA;QACA;MACA,CAPA,EAOAC,KAPA,CAOAC;QACAC;MACA,CATA;IAUA,CArBA;;IAsBAI;MACAT;QACAT,wBADA;QAEAC,sBAFA;QAGAC;MAHA,IAIAQ,IAJA,CAIA,UAJA;MAKA;IACA,CA7BA;;IA8BAS,UAEA,CAhCA;;IAiCAC;MACAX;QACAT,wBADA;QAEAqB;MAFA,IAGAX,IAHA,CAGA,UAHA;MAIA;IAGA;;EAzCA,CApDA;EAgGAY;IACAC;EADA;AAhGA","names":["name","data","modal","modal1","modal2","modal3","fo","user","sex","newName","userId","userName","userSex","newPassword","totalCredit","addCredit","minusCredit","balance","created","axios","then","response","catch","error","console","methods","tofc","fresh","ok","cancel","ok1","password","components","Footer"],"sourceRoot":"src/views","sources":["UserCenter.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <!-- header部分 -->\n    <header>\n      <p>我的账户</p>\n    </header>\n    <!-- 订单列表部分 -->\n      <body>\n    <img  style=\"height:20vw;weight:20vw;margin-top:55vw;margin-left:40vw;\" src=\"../assets/touxiang.png\"/>\n    <h2 style=\"text-align:center;margin-top:10vw;\" >\n    <img v-show=\"userSex\" style=\"height:4vw;weight:4vw;\" src=\"../assets/man.png\"/>\n    <img v-show=\"!userSex\" style=\"height:4vw;weight:4vw;\" src=\"../assets/women.png\"/>\n    {{userName}}</h2>\n    \n    <Button class=\"btn1\" type=\"primary\" @click=\"modal = true\">修改账号信息</Button>\n    <Modal\n        v-model=\"modal\"\n        title=\"修改账号信息\"\n        @on-ok=\"ok\"\n        @on-cancel=\"cancel\">\n        <div style=\"font-size:4vw\">昵称：</div>\n        <Input  v-model=\"newName\" placeholder=\"请输入新昵称...\" style=\"width: 60vw\" size=\"large\"></Input>\n        <div style=\"font-size:4vw\">性别：</div>\n        <Radio-group v-model=\"sex\">\n        <Radio label=\"1\">    \n            <span>男</span>\n        </Radio>\n        <Radio label=\"0\">\n            <span>女</span>\n        </Radio>   \n        </Radio-group>     \n    </Modal>\n    <Button class=\"btn2\" type=\"primary\" @click=\"modal1 = true\">修改密码</Button>\n    <Modal\n        v-model=\"modal1\"\n        title=\"修改密码\"\n        @on-ok=\"ok1\"\n        @on-cancel=\"cancel\">\n                <div style=\"font-size:4vw\">新密码：</div>\n        <Input  v-model=\"newPassword\" placeholder=\"请输入新密码...\" style=\"width: 60vw\" size=\"large\"></Input>\n\n        \n    </Modal>\n    <Button class=\"btn2\" type=\"primary\" @click=\"modal2 = true\">我的钱包</Button>\n    <Modal\n        v-model=\"modal2\"\n        title=\"我的钱包\"\n        @on-ok=\"ok\"\n        @on-cancel=\"cancel\">\n    \n        \n    </Modal>\n    <Button class=\"btn2\" type=\"primary\" @click=\"modal3 = true\">积分查询</Button>\n    <Modal\n        v-model=\"modal3\"\n        title=\"修改密码\"\n       \n        @on-cancel=\"cancel\">\n               <div style=\"text-align: center;font-weight:1000;font-size:20px\"> {{totalCredit}}积分 </div>\n            <Menu mode=\"horizontal\" :theme=\"theme1\" active-name=\"1\" @on-select=\"tofc\">\n        <Menu-item name=\"1\">\n            <Icon type=\"ios-paper\"></Icon>\n            积分消费查询\n        </Menu-item>\n        <Menu-item name=\"2\">\n            <Icon type=\"ios-people\"></Icon>\n            积分赚取查询\n        </Menu-item>\n\n        \n\n    </Menu>  \n    <ul style=\"font-size:15px\" v-if=\"!fo\">\n      <li v-for=\"(item,index) in addCredit\" :key=\"index\">\n      <div style=\"display: inline;\" v-if=\"item.channelId == '_ORDER_'\">购物</div>\n      <div style=\"display: inline;\" v-if=\"item.channelId == '_COMMENT_'\">评论</div>\n        <div style=\"display: inline;\">使用{{item.credit}}积分</div>\n        <div style=\"float:right\">{{item.createTime}}</div>\n      </li>\n      \n    </ul>\n    <ul style=\"font-size:15px\" v-if=\"fo\">\n      <li v-for=\"(item,index) in minusCredit\" :key=\"index\">\n      <div style=\"display: inline;\" v-if=\"item.channelId == '_SPEND_'\">花费</div>\n      <div style=\"display: inline;\" v-if=\"item.channelId == '_OT_'\">过期</div>\n        <div style=\"display: inline;\">减少{{item.credit}}积分</div>\n        <div style=\"float:right\">{{item.createTime}}</div>\n      </li>\n      \n    </ul>\n    </Modal>\n    <!-- 底部菜单部分 -->\n    </body>\n    <Footer></Footer>\n  </div>\n</template>\n<script>\nimport Footer from '../components/Footer.vue';\nimport axios from 'axios';\nexport default{\n  name:'UserCenter',\n  data(){\n    return {\n      modal: false,\n      modal1: false,\n      modal2: false,\n      modal3: false,\n      fo:true,\n      user:{},\n      sex: \"1\",\n      newName:\"\",\n      userId:\"\",\n      userName:\"\",\n      userSex:0,\n      newPassword:\"\",\n      totalCredit:50,\n      addCredit:[{\n        \"creditDetailId\": 69,\n        \"userId\": \"16\",\n        \"credit\":10,\n        \"channelId\": \"_ORDER_\",\n        \"createTime\": \"1971-01-12 07:36:07\",\n        \"expiredTime\": \"2016-07-30 07:38:42\"\n      }],\n      minusCredit:[{\n        \"creditDetailId\": 69,\n        \"userId\": \"16\",\n        \"credit\":10,\n        \"channelId\": \"_SPEND_\",\n        \"createTime\": \"1971-01-12 07:36:07\",\n        \"expiredTime\": \"2016-07-30 07:38:42\"\n      }],\n      balance:\"50¥\",\n    }\n  },\n  created() {\n    \n    this.user = this.$getSessionStorage('user');\n    axios.post('UserController/getUserInfoById',this.$qs.stringify({\n      userId:this.user.userId,\n    })).then(response=>{\n      let result = response.data;\n      this.userSex = result.userSex;\n      if(result.userSex==0){\n        this.sex = \"0\"\n      }\n      this.userName = result.userName;\n    }).catch(error=>{\n      console.error(error);\n    });\n  },\n  methods:{\n    tofc(key){\n        if(key==1){\nthis.fo = true\n        }\n        else{\nthis.fo = false\n        }\n    },\n    fresh(){\n        this.user = this.$getSessionStorage('user');\n    axios.post('UserController/getUserInfoById',this.$qs.stringify({\n      userId:this.user.userId,\n    })).then(response=>{\n      let result = response.data;\n      \n      this.userSex = result.userSex;\n      this.userName = result.userName;\n    }).catch(error=>{\n      console.error(error);\n    });\n    },\n    ok () {\n    axios.post('UserController/updateUserById',this.$qs.stringify({\n      userId:this.user.userId,\n      userName:this.newName,\n      userSex:this.sex/1,\n    })).then(this.fresh)\n                this.$Message.info('修改成功');\n            },\n            cancel () {\n                \n            },\n    ok1 () {\n    axios.post('UserController/updateUserById',this.$qs.stringify({\n      userId:this.user.userId,\n      password:this.newPassword\n    })).then(this.fresh)\n                this.$Message.info('修改成功');\n\n\n            },\n  },\n  \n  components:{\n    Footer\n  }\n}\n</script>\n<style scoped>\n/****************** 总容器 ******************/\n.wrapper {\n  width: 100%;\n  height: 100%;\n/* animation: 0.4s rowup forwards; */\n}\n.wrapper body {\n\n  animation: 0.7s rowup forwards;\n}\n@keyframes rowup {\n    0% {\n        opacity: 0.4;\n    }\n    100% {\n        opacity: 1;\n    }\n}\n/****************** header部分 ******************/\n.wrapper header {\n  width: 100%;\n  height: 12vw;\n  background: linear-gradient(to right, #0097FF, rgb(177, 201, 247));\n  color: #fff;\n  font-size: 4.8vw;\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n/****************** 历史订单列表部分 ******************/\n.wrapper h3 {\n  margin-top: 12vw;\n  box-sizing: border-box;\n  padding: 4vw;\n  font-size: 4vw;\n  font-weight: 300;\n  color: #999;\n}\n.wrapper .order {\n  width: 100%;\n}\n.wrapper .order li {\n  width: 100%;\n}\n.wrapper .order li .order-info {\n  box-sizing: border-box;\n  padding: 2vw 4vw;\n  font-size: 4vw;\n  color: #666;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.wrapper .order li .order-info .order-info-right {\n  display: flex;\n}\n.wrapper .order li .order-info .order-info-right .order-info-right-icon {\n  background-color: #f90;\n  color: #fff;\n  border-radius: 3px;\n  margin-left: 2vw;\n  user-select: none;\n  cursor: pointer;\n}\n.wrapper .order li .order-detailet {\n  width: 100%;\n}\n.wrapper .order li .order-detailet li {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 1vw 4vw;\n  color: #666;\n  font-size: 3vw;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.btn1{\n  background: linear-gradient(to bottom right, #0097FF, rgb(177, 201, 247));\n  width: 80vw;\n  height: 10vw;\n  margin-left: 10vw;\n  margin-top: 20vw;\n  border-radius: 10px;\n  border: 0.1px solid;\n  font-size: 4vw;\n  color:white;\n}\n.btn2{\n  background: linear-gradient(to bottom right, #0097FF, rgb(177, 201, 247));\n  width: 80vw;\n  height: 10vw;\n  margin-left: 10vw;\n  margin-top: 10vw;\n  border-radius: 10px;\n  border: 0.1px solid;\n  font-size: 4vw;\n  color:white;\n}\n</style>"]},"metadata":{},"sourceType":"module"}